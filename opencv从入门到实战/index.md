# OpenCVä»Žå…¥é—¨åˆ°å®žæˆ˜


åœ¨äººå·¥æ™ºèƒ½é£žé€Ÿå‘å±•çš„æ—¶ä»£ï¼Œè®¡ç®—æœºè§†è§‰å·²æˆä¸ºä¸€é—¨çƒ­é—¨æŠ€æœ¯ï¼Œè€Œ OpenCVï¼ˆOpen Source Computer Vision Libraryï¼‰åˆ™æ˜¯å®žçŽ°è¿™ä¸€æŠ€æœ¯çš„é‡è¦å·¥å…·ã€‚ä½œä¸ºä¸€ä¸ªå¼€æºçš„è·¨å¹³å°è®¡ç®—æœºè§†è§‰ä¸Žæœºå™¨å­¦ä¹ è½¯ä»¶åº“ï¼ŒOpenCV æ‹¥æœ‰ä¸°å¯Œçš„åŠŸèƒ½ï¼Œæ¶µç›–ä»ŽåŸºç¡€çš„å›¾åƒå¤„ç†åˆ°å¤æ‚çš„è§†è§‰ç®—æ³•å®žçŽ°ã€‚æœ¬æ–‡å°†å¸¦ä½ ä¸€æ­¥æ­¥æŽ¢ç´¢ OpenCV çš„ä¸–ç•Œï¼šä»Žç®€å•çš„å›¾åƒæ“ä½œå…¥é—¨ï¼Œåˆ°å®žçŽ°é«˜æ•ˆçš„è®¡ç®—æœºè§†è§‰åº”ç”¨ï¼Œæ— è®ºä½ æ˜¯åˆå­¦è€…è¿˜æ˜¯æœ‰ç»éªŒçš„å¼€å‘è€…ï¼Œéƒ½èƒ½æ‰¾åˆ°é€‚åˆä½ çš„å†…å®¹ã€‚å‡†å¤‡å¥½äº†å—ï¼Ÿè®©æˆ‘ä»¬ä¸€èµ·å¼€å¯ OpenCV çš„å¥‡å¦™æ—…ç¨‹ï¼

&lt;!--more--&gt;

## çŽ¯å¢ƒæ­å»º

å¦‚ä½•åœ¨ Visual Studio é¡¹ç›®ä¸­ä½¿ç”¨ OpenCVï¼Ÿæœ¬æ–‡å°†ä½œå®Œæ•´ä»‹ç»ã€‚

æœ¬æ–‡ä½¿ç”¨çš„çŽ¯å¢ƒæ˜¯ï¼š

- Windows 10
- Visual Studio Community 2019

### ä¸‹è½½å¹¶è§£åŽ‹é¢„æž„å»ºçš„åº“

æˆªè‡³åˆ° 2021 å¹´ 1 æœˆ 9 æ—¥çš„æœ€æ–°ç‰ˆæœ¬æ˜¯ 4.5.1 (opencv-4.5.1-vc14_vc15.exe)ï¼Œè¯¥ç‰ˆæœ¬çš„ exe æ–‡ä»¶å¯ä»¥åœ¨https://github.com/opencv/opencv/releases/ä¸‹è½½ï¼Œæœ¬æ–‡ä½¿ç”¨çš„æ˜¯ä¹‹å‰ä¸‹è½½çš„4.5.0ç‰ˆæœ¬ã€‚

![](/images/202412/2/1.png)

å½“ä¸‹è½½å®ŒæˆåŽï¼Œè¿è¡Œä¸‹è½½çš„.exe æ–‡ä»¶ä»¥è§£åŽ‹ç¼©å­˜æ¡£ã€‚

![](/images/202412/2/2.png)

æå–ç»“æŸåŽå¯ä»¥çœ‹åˆ° F ç›˜ä¸‹æ–°å¢žäº†ä¸€ä¸ª opencv ç›®å½•ï¼š

![](/images/202412/2/3.png)

### æ·»åŠ çŽ¯å¢ƒå˜é‡

å°†`F:\opencv\build\x64\vc15\bin`ç›®å½•æ·»åŠ åˆ°çŽ¯å¢ƒå˜é‡ä¸­ï¼Œ

![](/images/202412/2/4.png)

### åˆ›å»ºé¡¹ç›®

åœ¨ Visual Studio ä¸­åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®ï¼š

![](/images/202412/2/5.png)

è¿™é‡Œé€‰æ‹©çš„æ˜¯`Console App`ã€‚

ç„¶åŽï¼Œå°†å¹³å°ç›®æ ‡è®¾ç½®ä¸º x64ã€‚å› ä¸ºé¢„æž„å»ºçš„äºŒè¿›åˆ¶æ–‡ä»¶æ˜¯ä¸º x64 Windows å¹³å°æž„å»ºçš„ã€‚

![](/images/202412/2/6.png)

ä¹‹åŽï¼Œé€‰æ‹©èœå•æ ã€Projectã€‘ä¸‹çš„ã€é¡¹ç›®å Propertiesã€‘ï¼š

![](/images/202412/2/7.png)

ç„¶åŽï¼Œæ‰¾åˆ°ã€VC&#43;&#43; Directoriesã€‘è¿™ä¸€é¡¹ï¼Œå°†å…¶ä¸­çš„ã€Include Directoriesã€‘å’Œã€Library Directoriesã€‘ä¸¤é¡¹çš„è¿›è¡Œå¯¹åº”çš„æ·»åŠ ã€‚

![](/images/202412/2/8.png)

å…·ä½“æ·»åŠ æ“ä½œå¦‚ä¸‹ï¼š

![](/images/202412/2/9.png)

![](/images/202412/2/10.png)

æœ€åŽï¼Œæ‰¾åˆ°ã€Linkerã€‘ä¸‹çš„ã€Inputã€‘è¿™ä¸€é¡¹ï¼Œå°†å…¶ä¸­çš„ã€Additional Dependenciesã€‘æ·»åŠ (å…·ä½“æ“ä½œå¦‚ä¸Šå›¾æ‰€ç¤º)`opencv_world450d.lib`ã€‚

![](/images/202412/2/11.png)

`opencv_world450d.lib`æ–‡ä»¶æˆ‘ä»¬å¯ä»¥åœ¨`F:\opencv\build\x64\vc15\lib`ç›®å½•æ‰¾åˆ°ã€‚

![](/images/202412/2/12.png)

é¢„å¤‡å·¥ä½œåˆ°æ­¤å°±ç»“æŸäº†ï¼ŒæŽ¥ä¸‹æ¥æˆ‘ä»¬å¯ä»¥ç¼–å†™ä»£ç å•¦ï¼ðŸ˜‚

### ç¤ºä¾‹

è¿™é‡Œæˆ‘ä»¬åšä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œå°†ä¸€å¼ æœ¬åœ°çš„å›¾ç‰‡åœ¨çª—å£ä¸Šæ˜¾ç¤ºå‡ºæ¥ï¼Œä»£ç å¦‚ä¸‹ï¼š

```C&#43;&#43;
#include &lt;iostream&gt;
#include &lt;opencv2/core/core.hpp&gt;
#include &lt;opencv2/highgui/highgui.hpp&gt;
#include &lt;opencv2/imgproc.hpp&gt;

using namespace std;
using namespace cv;


int main()
{
	Mat image = imread(&#34;F:/avatar.jpeg&#34;);
	if (image.empty()) {
		cout &lt;&lt; &#34;Could not open or find the image&#34; &lt;&lt; endl;
		system(&#34;pause&#34;);
		return -1;
	}

	String windowName = &#34;My Window&#34;;
	imshow(windowName, image);
	waitKey(0);
	return 0;
}
```

ç¼–è¯‘è¿è¡Œç»“æžœå¦‚ä¸‹ï¼š

![](/images/202412/2/13.png)

æƒ³äº†è§£æ›´å¤šå…³äºŽ OpenCV çš„å†…å®¹çš„è¯ï¼Œè¯·ç§»æ­¥[OpenCV Tutorials](https://docs.opencv.org/4.5.0/d9/df8/tutorial_root.html)

OpenCV åº“åˆ†ä¸ºå¤šä¸ªæ¨¡å—ï¼šopencv_core æ¨¡å—åŒ…å«åº“çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œopencv_imgproc æ¨¡å—åŒ…å«ä¸»è¦çš„å›¾åƒå¤„ç†å‡½æ•°ï¼Œopencv_highgui æ¨¡å—æä¾›è¯»å†™å›¾åƒå’Œè§†é¢‘çš„å‡½æ•°ä»¥åŠä¸€äº›ç”¨æˆ·äº¤äº’å‡½æ•°ï¼Œç­‰ç­‰ã€‚åœ¨ä½¿ç”¨æŸä¸ªæ¨¡å—æ—¶ï¼Œéœ€è¦åŒ…å«è¯¥æ¨¡å—å¯¹åº”çš„å¤´æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼š

```C&#43;&#43;
#include &lt;opencv2/core.hpp&gt;
#include &lt;opencv2/imgproc.hpp&gt;
#include &lt;opencv2/highgui.hpp&gt;
```

OpenCV æ˜¯ç”¨æ¥å¤„ç†å›¾åƒçš„ï¼ŒæŽ¥ä¸‹æ¥æ¼”ç¤ºä¸€ä¸‹å¦‚ä½•ä»Žæ–‡ä»¶ä¸­åŠ è½½å›¾åƒã€åœ¨çª—å£ä¸­æ˜¾ç¤ºå›¾åƒã€ä½¿ç”¨å¤„ç†å‡½æ•°å†ä¿å­˜è¾“å‡ºçš„å›¾åƒã€‚

## åŠ è½½ã€æ˜¾ç¤ºå’Œå­˜å‚¨å›¾åƒ

é¦–å…ˆåœ¨ Visual Studio ä¸­åˆ›å»ºä¸€ä¸ªå¯ä»¥ä½¿ç”¨ OpenCV çš„é¡¹ç›®ï¼Œå…·ä½“å¯ä»¥å‚è€ƒ[åœ¨ Visual Studio é¡¹ç›®ä¸­ä½¿ç”¨ OpenCV](./2.åœ¨Visual%20Studioé¡¹ç›®ä¸­ä½¿ç”¨OpenCV.md)ä¸€æ–‡ã€‚

åŠ è½½ã€æ˜¾ç¤ºå›¾åƒçš„ç¤ºä¾‹å¦‚ä¸‹ï¼š

```C&#43;&#43;
#include &lt;opencv2/core.hpp&gt;
#include &lt;opencv2/highgui.hpp&gt;
#include &lt;opencv2/imgproc.hpp&gt;
#include &lt;iostream&gt;

int main()
{
	cv::Mat image;
	std::cout &lt;&lt; &#34;Image shape is : &#34; &lt;&lt; image.rows &lt;&lt; &#34; x &#34; &lt;&lt; image.cols &lt;&lt; std::endl;
	image = cv::imread(&#34;F:/avatar.jpeg&#34;);
	if (image.empty()) {
		std::cout &lt;&lt; &#34;Could not open or find the image&#34; &lt;&lt; std::endl;
		return -1;
	}
	std::cout &lt;&lt; &#34;Image shape is : &#34; &lt;&lt; image.rows &lt;&lt; &#34; x &#34; &lt;&lt; image.cols &lt;&lt; std::endl;
	cv::namedWindow(&#34;Window 1&#34;);
	cv::imshow(&#34;Window 2&#34;, image);
	cv::waitKey(0);
	return 0;
}
```

åœ¨ OpenCV çš„ C&#43;&#43; API ä¸­ï¼Œæ‰€æœ‰ç±»å’Œå‡½æ•°éƒ½åœ¨å‘½åç©ºé—´ cv å†…å®šä¹‰ã€‚æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª`Mat`å¯¹è±¡ imageï¼Œå…¶åˆå§‹åŒ–å°ºå¯¸ä¸º`cols=0, rows=0`ï¼Œå¯ä»¥é€šè¿‡è®¿é—® image å¯¹è±¡çš„`cols`å’Œ`rows`å±žæ€§æ¥äº†è§£å…¶å°ºå¯¸ã€‚

é€šè¿‡è°ƒç”¨`imread()`å‡½æ•°ï¼Œä¼ å…¥å›¾åƒè·¯å¾„å­—ç¬¦ä¸²ï¼Œè¯¥å‡½æ•°ä¼šè¯»å…¥ä¸€ä¸ªå›¾åƒï¼Œè§£ç åˆ†åˆ«é…å†…å­˜å¹¶è¿”å›žä¸€ä¸ª`Mat`å¯¹è±¡ã€‚

çŽ°åœ¨å¯ä»¥ä½¿ç”¨è¿™å‰¯å›¾åƒäº†ï¼Œä½†æ˜¯è¦å…ˆæ£€æŸ¥ä¸€ä¸‹å›¾åƒçš„è¯»å–æ˜¯å¦æ­£ç¡®ï¼ˆå¦‚æžœæ‰¾ä¸åˆ°æ–‡ä»¶ã€æ–‡ä»¶è¢«ç ´åæˆ–è€…æ–‡ä»¶æ ¼å¼æ— æ³•è¯†åˆ«ï¼Œå°±ä¼šå‘ç”Ÿé”™è¯¯ï¼‰ã€‚å¯ä»¥ä½¿ç”¨`Mat`å¯¹è±¡çš„`empty()`æ–¹æ³•ï¼Œå¦‚æžœæ²¡æœ‰åˆ†é…å›¾åƒæ•°æ®è¯¥æ–¹æ³•ä¼šè¿”å›ž`true`ã€‚

æŽ¥ä¸‹æ¥å°†è¯¥å›¾åƒæ˜¾ç¤ºå‡ºæ¥ï¼Œå¯ä»¥ç”¨ highgui æ¨¡å—çš„å‡½æ•°æ¥å®žçŽ°ã€‚é¦–å…ˆå®šä¹‰æ˜¾ç¤ºå›¾åƒçš„çª—å£ï¼Œç„¶åŽè®©å›¾åƒåœ¨æŒ‡å®šçš„çª—å£ä¸­æ˜¾ç¤ºå‡ºæ¥ã€‚`namedWindow(&#34;Window 1&#34;)`å‡½æ•°ä¼šåˆ›å»ºä¸€ä¸ªåä¸º`Window 1`çš„çª—å£ã€‚`imshow(&#34;Window 2&#34;, image)`ä¼šåˆ›å»ºä¸€ä¸ªåä¸º`Window 2`çš„çª—å£ï¼Œå¹¶å°†`image`å¯¹è±¡åœ¨å…¶ä¸­æ˜¾ç¤ºã€‚

å› ä¸ºæ˜¯æŽ§åˆ¶å°ç¨‹åºï¼Œ`main()`å‡½æ•°ç»“æŸæ—¶ä¼šå…³é—­ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªé¢å¤–çš„`highgui`å‡½æ•°ï¼Œå¾…ç”¨æˆ·æŒ‰é”®åŽå†ç»“æŸç¨‹åºã€‚`waitKey(0)`å‡½æ•°ä¼ å…¥æ­£æ•°è¡¨ç¤ºç­‰å¾…çš„æ¯«ç§’æ•°ï¼Œ0 è¡¨ç¤ºæ°¸è¿œåœ°ç­‰å¾…æŒ‰é”®ã€‚

è¿è¡Œç»“æžœå¦‚ä¸‹ï¼š

![](/images/202412/3/1.png)

å¯ä»¥ä½¿ç”¨`flip()`å‡½æ•°å°†å›¾åƒç¿»è½¬ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªæ–°çš„çŸ©é˜µå­˜æ”¾ç¿»è½¬è¾“å‡ºç»“æžœã€‚

```C&#43;&#43;
cv::Mat result;
cv::flip(image, result, 1); // 0ä¸Šä¸‹ç¿»è½¬; æ­£æ•°å·¦å³ç¿»è½¬; è´Ÿæ•°ä¸Šä¸‹å’Œå·¦å³ç¿»è½¬
```

## ç»˜åˆ¶å‡½æ•°

OpenCV æä¾›äº†å‡ ä¸ªç”¨äºŽåœ¨å›¾åƒä¸Šç»˜åˆ¶å½¢çŠ¶å’Œå†™å…¥æ–‡æœ¬çš„å‡½æ•°ã€‚åŸºæœ¬çš„å½¢çŠ¶ç»˜åˆ¶å‡½æ•°æœ‰`circle`ï¼Œ`ellipse`ï¼Œ`line`å’Œ`rectangle`ã€‚

æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªç»˜åˆ¶åœ†å½¢çš„ä¾‹å­ï¼š

```C&#43;&#43;
cv::circle(image, cv::Point(image.cols / 2, image.rows / 2), 65, 0, 3);
```

è¯¥å‡½æ•°çš„åŽŸåž‹å¦‚ä¸‹ï¼š

![](/images/202412/3/2.png)

åˆæˆ–è€…ç»˜åˆ¶ä¸€ä¸ªçŸ©å½¢ï¼š

```C&#43;&#43;
cv::rectangle(image, cv::Rect(10, 10, 25, 35), 0, 3);
```

è¯¥å‡½æ•°çš„åŽŸåž‹å¦‚ä¸‹ï¼š

![](/images/202412/3/3.png)

## `cv::Mat`

`cv::Mat`ç±»æ˜¯ç”¨æ¥å­˜æ”¾å›¾åƒï¼ˆä»¥åŠå…¶ä»–çŸ©é˜µæ•°æ®ï¼‰çš„æ•°æ®ç»“æž„ã€‚åœ¨æ‰€æœ‰ OpenCV ç±»å’Œå‡½æ•°ä¸­ï¼Œè¿™ä¸ªæ•°æ®ç»“æž„å æ®æ ¸å¿ƒåœ°ä½ã€‚

`cv::Mat`æœ‰ä¸¤ä¸ªç»„æˆéƒ¨åˆ†ï¼šä¸€ä¸ªå¤´éƒ¨å’Œä¸€ä¸ªæ•°æ®å—ã€‚å¤´éƒ¨åŒ…å«äº†çŸ©é˜µçš„æ‰€æœ‰ç›¸å…³ä¿¡æ¯ï¼ˆå¤§å°ã€é€šé“æ•°ã€æ•°æ®ç±»åž‹ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¦‚`cols`ã€`rows`å’Œ`channels`ç­‰å±žæ€§è®¿é—®å¤´éƒ¨ä¿¡æ¯ã€‚æ•°æ®å—åŒ…å«äº†å›¾åƒæ‰€æœ‰çš„åƒç´ å€¼ã€‚å¤´éƒ¨æœ‰ä¸€ä¸ªæŒ‡å‘æ•°æ®å—çš„æŒ‡é’ˆï¼Œå³`data`å±žæ€§ã€‚`cv::Mat`æœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„å±žæ€§ï¼Œå³åªæœ‰æ˜Žç¡®è¦æ±‚æ—¶ï¼Œå†…å­˜å—æ‰ä¼šè¢«å¤åˆ¶ã€‚

æ–°åˆ›å»ºçš„`cv::Mat`å¯¹è±¡é»˜è®¤å¤§å°ä¸º 0ï¼Œä½†ä¹Ÿå¯ä»¥æŒ‡å®šåˆå§‹å¤§å°ï¼Œä¾‹å¦‚ï¼š

```C&#43;&#43;
cv::Mat image1(240, 320, CV_8U, 100);
```

éœ€è¦æŒ‡å®šæ¯ä¸ªçŸ©é˜µå…ƒç´ çš„ç±»åž‹ï¼Œè¿™é‡Œç”¨çš„æ˜¯`CV_8U`ï¼Œè¡¨ç¤ºæ¯ä¸ªåƒç´ å¯¹åº” 1 å­—èŠ‚ï¼ˆç°åº¦å›¾åƒï¼‰ï¼Œå­—æ¯`U`è¡¨ç¤ºæ— ç¬¦å·æ•°ï¼›ä¹Ÿå¯ä»¥ç”¨`S`è¡¨ç¤ºæœ‰ç¬¦å·æ•°ã€‚å¯¹äºŽå½©è‰²å›¾åƒï¼Œè¯¥ç”¨ä¸‰é€šé“ç±»åž‹`CV_8UC3`ï¼Œä¹Ÿå¯ä»¥å®šä¹‰ 16 ä½å’Œ 32 ä½çš„æ•´æ•°ï¼ˆæœ‰ç¬¦å·æˆ–æ— ç¬¦å·ï¼‰ï¼Œä¾‹å¦‚`CV_16SC3`ã€‚

å›¾åƒï¼ˆæˆ–çŸ©é˜µï¼‰çš„æ¯ä¸ªå…ƒç´ éƒ½å¯ä»¥åŒ…å«å¤šä¸ªå€¼ï¼ˆä¾‹å¦‚å½©è‰²å›¾åƒä¸­çš„ä¸‰ä¸ªé€šé“ï¼‰ï¼Œå› æ­¤ OpenCV å¼•å…¥äº†ä¸€ä¸ªç®€å•çš„æ•°æ®ç»“æž„`cv::Scaler`ï¼Œç”¨äºŽåœ¨è°ƒç”¨å‡½æ•°æ—¶ä¼ é€’åƒç´ å€¼ã€‚

ä¾‹å¦‚åˆ›å»ºä¸€ä¸ªå½©è‰²å›¾åƒå¹¶ç”¨çº¢è‰²åƒç´ åˆå§‹åŒ–ï¼š

```C&#43;&#43;
// åˆ›å»ºä¸€ä¸ªçº¢è‰²å›¾åƒ
// é€šé“æ¬¡åºæ˜¯BGR
cv::Mat image2(240, 320, CV_8UC3, cv::Scaler(0, 0, 255));
```

æ›´å¤šåˆ›å»ºæ–¹å¼ï¼š

```C&#43;&#43;
// åˆ›å»ºç°åº¦å›¾åƒ
cv::Mat image3(240, 320, CV_8U, cv::Scaler(100));

// ä½¿ç”¨cv::Size()åˆ›å»ºå›¾åƒ
cv::Mat image4(cv::Size(240, 320), CV_8UC3);
```

å¯ä»¥éšæ—¶ç”¨`create()`æ–¹æ³•åˆ†é…æˆ–é‡æ–°åˆ†é…å›¾åƒçš„æ•°æ®å—ã€‚å¦‚æžœå›¾åƒå·²è¢«åˆ†é…ï¼ŒåŽŸæ¥çš„å†…å®¹ä¼šå…ˆè¢«é‡Šæ”¾ã€‚å¦‚æžœæ–°çš„å°ºå¯¸å’Œç±»åž‹ä¸ŽåŽŸæ¥ç›¸åŒï¼Œå°±ä¸ä¼šé‡æ–°åˆ†é…å†…å­˜ï¼š

```C&#43;&#43;
image4.create(200, 200, CV_8U);
```

`cv::Mat`å®žçŽ°äº†è®¡æ•°å¼•ç”¨å’Œæµ…å¤åˆ¶ã€‚å› æ­¤ï¼Œå½“åœ¨ä¸¤å¹…å›¾åƒä¹‹é—´èµ‹å€¼æ—¶ï¼Œå›¾åƒæ•°æ®å¹¶ä¸ä¼šè¢«å¤åˆ¶ï¼Œæ­¤æ—¶ä¸¤å¹…å›¾åƒéƒ½æŒ‡å‘åŒä¸€ä¸ªå†…å­˜å—ã€‚

```C&#43;&#43;
cv::Mat image4(image4);
image1 = image3;
```

å¦‚æžœè¦å¯¹å›¾åƒå†…å®¹åšä¸€ä¸ªæ·±å¤åˆ¶ï¼Œå¯ä»¥ç”¨`copyTo`æ–¹æ³•ï¼Œç›®æ ‡å›¾åƒå°†ä¼šè°ƒç”¨`create`æ–¹æ³•ã€‚å¦ä¸€ä¸ªç”Ÿæˆå›¾åƒå‰¯æœ¬çš„æ–¹æ³•æ˜¯`clone`ï¼Œå³åˆ›å»ºä¸€ä¸ªå®Œå…¨ç›¸åŒçš„æ–°å›¾åƒï¼š

```C&#43;&#43;
image3.copyTo(image2);
cv::Mat image6 = image3.clone();
```

å¦‚æžœéœ€è¦å°†ä¸€å¹…å›¾åƒå¤åˆ¶åˆ°å¦ä¸€å¹…å›¾åƒä¸­ï¼Œä¸”ä¸¤è€…çš„æ•°æ®ç±»åž‹ä¸ä¸€å®šç›¸åŒï¼Œé‚£å°±å¯ä»¥ä½¿ç”¨`convertTo`æ–¹æ³•ã€‚

```C&#43;&#43;
image1.convertTo(image2, CV_32F, 1/255.0, 0.0);
```

## ROI

æˆ‘ä»¬å¯ä»¥ç”¨å¦‚ä¸‹æ–¹å¼å®šä¹‰ä¸€ä¸ªæ„Ÿå…´è¶£çš„åŒºåŸŸï¼ˆRegion Of Interest, ROIï¼‰ã€‚

```C&#43;&#43;
cv::Mat imageROI(image, cv::Rect(image.cols - logo.cols, image.rows - logo.rows,
    logo.cols, logo.rows));
```

ä¹‹åŽï¼Œå°†`logo`å¤åˆ¶åˆ°`imageROI`ï¼Œå®Œæ•´ä»£ç å¦‚ä¸‹ï¼š

```C&#43;&#43;
#include &lt;opencv2/core.hpp&gt;
#include &lt;opencv2/highgui.hpp&gt;
#include &lt;opencv2/imgproc.hpp&gt;
#include &lt;iostream&gt;

int main()
{
	cv::Mat image;
	std::cout &lt;&lt; &#34;Image shape is : &#34; &lt;&lt; image.rows &lt;&lt; &#34; x &#34; &lt;&lt; image.cols &lt;&lt; std::endl;
	image = cv::imread(&#34;F:/avatar.jpeg&#34;);
	if (image.empty()) {
		std::cout &lt;&lt; &#34;Could not open or find the image&#34; &lt;&lt; std::endl;
		return -1;
	}
	cv::Mat logo;
	logo = cv::imread(&#34;F:/logo.png&#34;);
	if (logo.empty()) {
		std::cout &lt;&lt; &#34;Could not open or find the image&#34; &lt;&lt; std::endl;
		return -1;
	}
	cv::Mat imageROI(image, cv::Rect(image.cols - logo.cols, image.rows - logo.rows,
		logo.cols, logo.rows));
	logo.copyTo(imageROI);
	cv::imshow(&#34;Window 1&#34;, image);
	cv::waitKey(0);
	return 0;
}
```

è¿è¡Œç»“æžœï¼š

![](/images/202412/3/4.png)

æˆ–è€…é€šè¿‡å¦‚ä¸‹æ–¹å¼é€‰å– ROIï¼š

```C&#43;&#43;
imageROI = image(cv::Range(image.rows-logo.rows, image.rows),cv::Range(image.cols-logo.cols, image.cols));
```

## å‚è€ƒ

- https://www.opencv-srf.com/2017/11/install-opencv-with-visual-studio.html
- https://medium.com/@subwaymatch/opencv-410-with-vs-2019-3d0bc0c81d96
- ã€ŠOpenCV è®¡ç®—æœºè§†è§‰ç¼–ç¨‹æ”»ç•¥ ç¬¬ 3 ç‰ˆã€‹


---

> ä½œè€…: [AndyFree96](https://andyfree96.github.io/)  
> URL: https://andyfree96.github.io/opencv%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%AE%9E%E6%88%98/  

